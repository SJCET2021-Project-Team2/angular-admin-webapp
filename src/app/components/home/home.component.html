<div class="container">

    <!-- virus positive user input -->

    <form #inputUserId="ngForm" (ngSubmit)=onSubmit(inputUserId)>
        <div class="input-group mt-5">
            <input type="text" autocomplete="off" class="form-control m-1"
                placeholder="Enter id/phone of peson tested virus +ve" required ngModel name="userInput">
            <button class="btn btn-outline-dark m-1" type="submit" [disabled]="!inputUserId.valid">Get User
                Logs</button>
        </div>
    </form>


    <div class="card mt-5" *ngIf="user">

        <!-- virus postive user details -->
        <h6 class="text-center fs-3 mt-3">{{user.userName}}</h6>
        <div class="row">

            <div class="col text-center">
                <span class="badge bg-secondary mb-1">User Id</span>
                <h6>
                    #{{user.userId}}
                </h6>

                <span class="badge bg-secondary mb-1">Location</span>
                <h6>
                    {{user.userLocation}}
                </h6>

            </div>
            <div class="col text-center">
                <span class="badge bg-secondary mb-1">email Id</span>
                <h6>
                    {{user.userMail}}
                </h6>

                <span class="badge bg-secondary mb-1">Mobile No.</span>
                <h6>
                    {{user.userMobile}}
                </h6>

            </div>

        </div>

        <!-- alert all users exposed with virus postive user -->

        <form #inputMsg="ngForm" (ngSubmit)=sendAlert(inputMsg)>
            <div class="input-group p-5">
                <label class="input-group-text" id="">Alert Message</label>
                <input type="text" autocomplete="off"
                    placeholder="You have been exposed to someone tested positive for virus. Stay Home Stay Safe"
                    class="form-control" required ngModel name="alertMsg">
                <button class="btn btn-warning" type="submit">Send Alert</button>
            </div>
        </form>

        <!-- virus positive user logs -->

        <h3 class="text mx-3">{{user.userName}} Logs</h3>
        <div class="card-body">
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>#userId</th>
                        <th>#premisesId</th>
                        <th>User Entry Date</th>
                        <th>User Entry Time</th>
                        <th></th>
                    </tr>
                </thead>



                <tbody>
                    <tr *ngFor="let log of logs">
                        <td>{{log.userId}}</td>
                        <td>{{log.premisesId}}</td>
                        <td>{{log.userEntryDate}}</td>
                        <td>{{log.userEntryTime}}</td>
                        <!-- <td><span class="badge rounded-pill bg-success" (click)="previewDetails(mymodal, log)">View Details</span></td> -->
                        <td><span class="badge rounded-pill bg-success" (click)="previewDetails(mymodal, log)">View
                                Details</span></td>

                    </tr>
                </tbody>


                <ng-template #mymodal let-modal>

                    <div class="modal-body">
                        {{selectedUser.userId}}
                        {{selectedUser.userName}}
                        {{selectedUser.userMobile}}
                        {{selectedUser.userMail}}
                        {{selectedUser.userLocation}}

                        <br>

                        {{selectedPremises.premisesId}}
                        {{selectedPremises.premisesName}}
                        {{selectedPremises.premisesMobile}}
                        {{selectedPremises.premisesMail}}
                        {{selectedPremises.premisesLocation}}

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-secondary"
                            (click)="modal.close('Save click')">Close</button>
                    </div>
                </ng-template>





            </table>
        </div>
    </div>
</div>